add_namespace = soviet_leader_change
add_namespace = Tblisi

country_event = { #Death of Stalin
	id = soviet_leader_change.1
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.1"}
	title = {
		text = soviet_leader_change.1.t.A
		trigger = { NOT = { has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason } }
	} 
	title = {
		text = soviet_leader_change.1.t.B
		trigger = { has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason }
	}
	desc = {
		text = soviet_leader_change.1.d.A
		trigger = { NOT = { has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason } }
	}
	desc = {
		text = soviet_leader_change.1.d.B
		trigger = { has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason }
	}
	picture = GFX_report_stalin_death

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		set_global_flag = stalin_dead
		hidden_effect = {
			DDR = {
				country_event = {
					id = cwu.1
					days = 125
				}
			}
		}
	}
	option = {
		name = soviet_leader_change.1.o.A
		trigger = {
			NOT = { has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason }
		}
		death_of_stalin_super_event = yes
		complete_national_focus = SOV_Stalin_Establish_the_Malenkov_Khrushchev_and_Beria_Troika
		hidden_effect = {
			PRC = {
				complete_national_focus = PRC_50s-Soviet_Upheaval
				mark_focus_tree_layout_dirty = yes
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
                has_game_rule = {
			        rule = SOV_internal_ai_behavior
			        option = STALIN
		        }
                factor = 0
            }
		}
	}
	option = {
		name = soviet_leader_change.1.o.B
		trigger = {
			has_completed_focus = SOV_Stalin_Arrest_The_Beria_Clique_For_Treason
		}
		complete_national_focus = SOV_Stalin_Establish_the_Malenkov_Pervukhinn_and_Saburov_Advisory_Body
		hidden_effect = {
			retire_country_leader = yes
			PRC = {
				complete_national_focus = PRC_50s-Soviet_Upheaval
				mark_focus_tree_layout_dirty = yes
			}
		}
		create_country_leader = {
			name = "Joseph Stalin"
			desc = "pol_desc_stalin"
			picture = GFX_Old_Stalin
			id = 1953
			ideology = stalinism
			traits = {
				Lenin_Successor
				Uncontested_leader
				Terrifying_Paranoiac
			}
		}
		ai_chance = {
			factor = 1
		}
	}
}
country_event = { #KhrushchevRemoval
	id = soviet_leader_change.2
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.2"}
	title = soviet_leader_change.2.t
	desc = soviet_leader_change.2.desc
	picture = GFX_KhruschevRel_2
	
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = soviet_leader_change.2.o.A
		trigger = {
			OR = {
				has_country_flag = SOV_KHR_Loss
				has_country_flag = SOV_KHR_Successful_Plan
			}
		}
		DDR = {
			country_event = SOV_GDR.1
		}
		load_focus_tree = {
			tree = SOV_Brezhnevite
			keep_completed = yes
		}
		create_country_leader = {
			name = "Leonid Brezhnev"
			picture = "Leonid_Brezhnev.dds"
			expire = "1982.11.10"
			ideology = marxism_leninism
		}
	}
	option = {
		name = soviet_leader_change.2.o.C
		trigger = {
			OR = {
				has_country_flag = SOV_KHR_Successful_Plan_even_better
				has_country_flag = SOV_KHR_Successful_Plan
			}
		}
		load_focus_tree = {
			tree = SOV_Khruschev_Extended
			keep_completed = yes
		}
		create_country_leader = {
			name = "Nikita Khrushchev"
			desc = "pol_desc_khrushchev"
			picture = "Nikita_Khrushchev2.dds"
			ideology = marxism_leninism
			traits = {
				Popular_Premier
				Ingenuous_Reformer
				Eccentric_Research_Enthusiast
				Affable_Diplomat
			}
		}
	}
}
country_event = { #Brezhaccident
	id = soviet_leader_change.3
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.3"}
	title = soviet_leader_change.3.t
	desc = soviet_leader_change.3.desc
	picture = GFX_KhruschevRel_2
	
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = soviet_leader_change.3.o.A
		country_event = {
			id = soviet_leader_change.4
			days = 231
			random_hours = 5
		}
	}
	option = {
		name = soviet_leader_change.3.o.B
		trigger = {
			always = no
		}
		load_focus_tree = SOV_BrezhnevLivesLonger
	}
}
country_event = { #Brezhdeath
	id = soviet_leader_change.4
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.4"}
	title = soviet_leader_change.4.t
	desc = soviet_leader_change.4.desc
	picture = GFX_KhruschevRel_2
	
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = soviet_leader_change.4.o.A
		kill_country_leader = yes
		create_country_leader = {
			name = "Yuri Andropov"
			picture = "Yuri_Andropov.dds"
			ideology = stalinism
			traits = {
				Unifying_Figure
				Corruption_Buster
				Ingenuous_Reformer
			}
		}
        complete_national_focus = SOV_Andropov_Elected_GenSec
		load_focus_tree = {
			tree = SOV_Andropov
			keep_completed = yes
		}
	}
}
country_event = { #APG
	id = soviet_leader_change.5
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.5"}
	title = soviet_leader_change.5.t
	desc = soviet_leader_change.5.desc
	picture = GFX_KhruschevRel_2
	
	is_triggered_only = yes

	option = {
		name = soviet_leader_change.5.o.A
		complete_national_focus = SOV_anti_party_group_coup
		complete_national_focus = SOV_khrushchevs_union
		hidden_effect = {
			country_event = { id = soviet_leader_change.2 days = 2672 }
		}
	}
	
	option = {
		name = soviet_leader_change.5.o.B
		kill_country_leader = yes
		create_country_leader = {
			name = "Nikolai Bulganin"
			picture = "Nikolai_Bulganin.dds"
			ideology = stalinism
			traits = {
			}
		}
		load_focus_tree = {
			tree = SOV_Bulganin
			keep_completed = yes
		}
	}
}
country_event = { #Andropov Death
	id = soviet_leader_change.6
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = sov_death.3"}
	title = "Death of Yuri Vladimirovich Andropov"
	desc = sov_death.3.d
	picture = GFX_politics

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "Trusty Konstantin Chernenko!"
		retire_country_leader = yes
		create_country_leader = {
			name = "Konstantin Chernenko"
			picture = "Konstantin_Chernenko.dds"
			ideology = marxism_leninism
			traits = {
			}
		}
		set_country_flag = Chernenko
		ai_chance = {
			factor = 95
		}

	}
}
country_event = { #Chernenko Death
	id = soviet_leader_change.7
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = sov_death.3"}
	title = "Death of Konstantin Ustinovich Chernenko"
	desc = sov_death.4.d
	picture = GFX_Chernenko_funeral

	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = "Reformer Mikhail Gorbachev"
		retire_country_leader = yes
		create_country_leader = {
			name = "Mikhail Gorbachev"
			picture = "Mikhail_Gorbachev.dds"
			ideology = liberal_communism
			traits = {
			}
		}
		ai_chance = {
			factor = 90
		}

	}
	option = {
		name = "Conservative Grigory Romanov!"
		retire_country_leader = yes
		create_country_leader = {
			name = "Grigory Romanov"
			picture = "Grigory_Romanov.dds"
			ideology = marxism_leninism
			traits = {
			}
		}
		ai_chance = {
			factor = 10
		}

	}
}

country_event = { #Tblisi
	id = Tblisi.1
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = Tblisi.1"}
	title = Tblisi.1.t
	desc = Tblisi.1.d
	picture = GFX_Tblisi_Riots
	major = yes
	is_triggered_only = yes

	option = {
		name = "Why would they protest such an action?"
		country_event = {
			id = Tblisi.2
			days = 20
		}

	}
}
country_event = { #Tblisi 2
	id = Tblisi.2
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = Tblisi.2"}
	title = Tblisi.2.t
	desc = Tblisi.2.d
	picture = GFX_Tblisi_Riots_2

	is_triggered_only = yes

	option = {
		name = "A return to sanity...."

	}
}
add_namespace = Soviet_End
news_event = {
	id = Soviet_End.1 
 immediate = {log = "[GetDateText]: [Root.GetTag]: id = Soviet_End.1"}
	title = "[GetNewspaperHeader]The Dissolution of the Soviet Union"
	desc = Soviet_End.1.d
	picture = GFX_Soviet_End
	major = yes

	is_triggered_only = yes
	option = {
		name = "Test"
        if = {
            limit = {
                is_ai = no
            }
			RNU = {
				transfer_state = 208
				set_province_controller = 3050
				set_province_controller = 6150
				set_province_controller = 3187
				set_province_controller = 155
				set_province_controller = 11092
				set_province_controller = 92
				set_province_controller = 3144
				set_province_controller = 3033
				set_province_controller = 11159
				set_province_controller = 90
				set_province_controller = 6106
				set_province_controller = 6057
				set_province_controller = 11153
				set_province_controller = 11150
				set_province_controller = 6172
				set_province_controller = 3084
				set_province_controller = 11156
				set_province_controller = 9231
				set_province_controller = 6094
				set_province_controller = 9118
				set_province_controller = 2994
				set_province_controller = 9078
				set_province_controller = 6052
				set_province_controller = 3133
				set_province_controller = 11046
				set_province_controller = 6153
				set_province_controller = 40



			}
			CPS = {
				transfer_state = 195
				set_province_controller = 149 
				set_province_controller = 11162
				set_province_controller = 9206
				set_province_controller = 9100
				set_province_controller = 3060
				set_province_controller = 9105
			}
			IRF = {
				transfer_state = 652
				transfer_state = 651
				transfer_state = 249
				transfer_state = 572
			}
			CHE = {
				transfer_state = 265
				transfer_state = 245
			}


			LBR = {
				transfer_state = 254
				transfer_state = 257
			}
			RLG = {
				transfer_state = 258
			}
			RNC = {
				transfer_state = 218
			}
			ECR = {
				transfer_state = 236
				transfer_state = 237
				transfer_state = 235
				transfer_state = 238
				transfer_state = 234

				set_province_controller = 11559
				set_province_controller = 586
				set_province_controller = 426
				set_province_controller = 3587
				set_province_controller = 11403
				set_province_controller = 6417
				set_province_controller = 775
				set_province_controller = 3779
				set_province_controller = 6796
				set_province_controller = 9415
				set_province_controller = 6468
				set_province_controller = 9581
				set_province_controller = 3777
				set_province_controller = 585
				set_province_controller = 3417
				set_province_controller = 11416
				set_province_controller = 11400
				set_province_controller = 6490
				set_province_controller = 3443
				set_province_controller = 3464
			}
			RFE = {
				transfer_state = 563
				transfer_state = 561
				transfer_state = 574
				transfer_state = 568
				transfer_state = 566
				transfer_state = 329
			}

			USO = {
				transfer_state = 217
				transfer_state = 260
				transfer_state = 220
				transfer_state = 240
				transfer_state = 565
				transfer_state = 569

				set_province_controller = 11047
				set_province_controller = 198
				set_province_controller = 13076
				set_province_controller = 4669
				set_province_controller = 8461
				set_province_controller = 6040
				set_province_controller = 3431
			}
			SOV = {
				
				transfer_state = 657
				transfer_state = 564
				transfer_state = 224
				transfer_state = 222
				transfer_state = 205
				transfer_state = 223
				transfer_state = 232
				transfer_state = 263
				transfer_state = 209
				transfer_state = 247
				transfer_state = 242
				transfer_state = 219
				transfer_state = 244
				transfer_state = 408
				transfer_state = 409
				transfer_state = 562
				transfer_state = 644
				transfer_state = 637

				set_province_controller = 312
				set_province_controller = 6102
				set_province_controller = 3168
				set_province_controller = 11038
				set_province_controller = 3092
				set_province_controller = 140

				set_province_controller = 4797
				set_province_controller = 1762
				set_province_controller = 12525
				set_province_controller = 1727
				set_province_controller = 10543
				set_province_controller = 7838
				set_province_controller = 12540

				set_cosmetic_tag = RUSSIA
			}
			RFE = {

				set_province_controller = 4716
				set_province_controller = 4835
				set_province_controller = 12506
				set_province_controller = 12575
			}
			SKU = {
				transfer_state = 655
				transfer_state = 537
				transfer_state = 555
			}
			MRP = {
				transfer_state = 264
				transfer_state = 233
				set_province_controller = 9663	#Sochi
				#934 Abkhazia?
			}
		}
	}
	option = {
		name = "The End of an Era"
        if = {
            limit = {
                is_ai = no
            }
            Super_Event_Fall_of_Soviet_Union_Play = yes
			SOV = {
				release = EST
				release = LAT
				release = LIT
				release = UKR
				release = UIA
				UKR = {
					annex_country = {
						target = UIA
						transfer_troops = yes
					}
					transfer_state = 137
					transfer_state = 1037
				}
				release = ABK
				release = SOS
				release = NGK
				release = CHE
				release = PMR
				release = MOL
				release = ARM
				release = GEO
				release = TAJ
				release = BLR
				release = KYR
				release = ARM
				release = AZR
				release = KAZ
				release = TMS
				release = UZB

				capital_scope = {
					transfer_state_to = RUS
				}
			}
			RUS = {
				annex_country = {
					target = SOV
					transfer_troops = yes
				}
				329 = {
					set_demilitarized_zone = yes
				}
				set_capital = {state = 219}
			}
			EST = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			LAT = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			LIT = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			UKR = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			RUS = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			ABK = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			SOS = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			NGK = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			CHE = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			PMR = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			MOL = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			ARM = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			GEO = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			TAJ = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			BLR = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			KYR = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			ARM = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			AZR = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			KAZ = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			TMS = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
			UZB = {
				set_politics = {
					ruling_party = conservative
					last_election = "1949.1.1"
					election_frequency = 48
					elections_allowed = no
				}
			}
        }
	}
}
country_event = { 
	id = soviet_leader_change.8
	immediate = {log = "[GetDateText]: [Root.GetTag]: id = soviet_leader_change.8"}
	title = soviet_leader_change.8.t
	desc = soviet_leader_change.8.d
	picture = GFX_KhruschevRel_2

	is_triggered_only = yes
	fire_only_once = yes

	option = {
	    load_focus_tree = SOV_Molotov
		complete_national_focus = SOV_molotov_union
		name = soviet_leader_change.8.A
		retire_country_leader = yes
		create_country_leader = {
			name = "Vyacheslav Molotov"
			picture = "Vyacheslav_Molotov.dds"
			ideology = marxism_leninism
			traits = {
			}
		}

	}
}