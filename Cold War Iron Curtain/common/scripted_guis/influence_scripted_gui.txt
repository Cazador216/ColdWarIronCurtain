scripted_gui = {
	country_target_investment_menu_panel = { 
		context_type = decision_category
		window_name = "country_investment_target_menu"		# "kna_country_state_target_menu"
		ai_enabled = {
			always = no
		}
		dynamic_lists = {
			country_investment_menu_selection_grid = {
				array = root.investment_potential_list
				change_scope = yes
				entry_container = investment_potential_list_entry
			}
			state_investment_menu_selection_grid = {
				array = root.state_investment_potential_list
				change_scope = yes
				entry_container = state_investment_potential_list_entry
			}
		}
		effects = {
			investment_potential_list_button_click = { 
				set_variable = { root.current_investment_scope = THIS.id }
				clear_array = ROOT.state_investment_potential_list
				every_owned_state = {
					add_to_array = { ROOT.state_investment_potential_list = THIS.id }
				}
				set_variable = { root.current_investment_state_scope = 0 }
			}
			investment_potential_list_state_button_click = { 
				set_variable = {root.current_investment_state_scope = THIS.id }

				set_variable = { building_renewable_qualifier = building_level@renewable_powerplant }

				set_variable = { building_state_infra_qualifier = building_level@state_infrastructure }
				set_variable = { building_infra_qualifier = building_level@infrastructure }
				set_variable = { building_water_infra_qualifier = building_level@water_infrastructure }

				set_variable = { infrastructure_percentage_discount = 100 }
				set_variable = { total_infra = building_state_infra_qualifier }
				add_to_variable = { total_infra = building_infra_qualifier }
				add_to_variable = { total_infra = building_water_infra_qualifier }
				multiply_variable = { total_infra = 3.33 }
				subtract_from_variable = { infrastructure_percentage_discount = total_infra }
				divide_variable = { infrastructure_percentage_discount = 100 }

				save_global_event_target_as = Investment_State
				
				set_variable = { short_length_construction = 60 }
				multiply_variable = { short_length_construction = infrastructure_percentage_discount }
				set_variable = { medium_length_construction = 180 }
				multiply_variable = { medium_length_construction = infrastructure_percentage_discount }
				set_variable = { long_length_construction = 360 }
				multiply_variable = { long_length_construction = infrastructure_percentage_discount }
				round_variable = short_length_construction
				round_variable = medium_length_construction
				round_variable = long_length_construction

				if = { limit = { development_level_zero_check = yes } set_variable = { development_level_increase = 1 } }
				if = { limit = { development_level_one_check = yes }  set_variable = { development_level_increase = 1.25 } }
				if = { limit = { development_level_two_check = yes }  set_variable = { development_level_increase = 1.50 } }
				if = { limit = { development_level_three_check = yes }set_variable = { development_level_increase = 1.75 } }
				if = { limit = { development_level_four_check = yes } set_variable = { development_level_increase = 2 } }
				if = { limit = { development_level_five_check = yes } set_variable = { development_level_increase = 2.25 } }
			}
		}
	}
	domestic_influence_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "domestic_influence_diplo"
		
		visible = {
		  #always = yes
		}
		
		effects = { }
	}
	fpp_influence_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "fpp_influence_diplo"
		
		visible = {
		  #always = yes
		}
		
		effects = { }
	}
	
	position_1_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_1_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_1_var_text_visible = {
				check_variable = {
					influence_array_val^0 > 0.49
				}
			}
		}
		
		effects = { }
	}
	position_2_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_2_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_2_var_text_visible = {
				check_variable = {
					influence_array_val^1 > 0.49
				}
			}
		}		
		effects = { }
	}
	position_3_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_3_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_3_var_text_visible = {
				check_variable = {
					influence_array_val^2 > 0.49
				}
			}
		}
		effects = { }
	}
	position_4_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_4_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_4_var_text_visible = {
				check_variable = {
					influence_array_val^3 > 0.49
				}
			}
		}
		effects = { }
	}
	position_5_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_5_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_5_var_text_visible = {
				check_variable = {
					influence_array_val^4 > 0.49
				}
			}
		}	
		effects = { }
	}
	position_6_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_6_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_6_var_text_visible = {
				check_variable = {
					influence_array_val^5 > 0.49
				}
			}
		}
		effects = { }
	}
	position_7_diplo = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_7_diplo"
		
		visible = {
		  #always = yes
		}
		triggers = {
			position_7_var_text_visible = {
				check_variable = {
					influence_array_val^6 > 0.49
				}
			}
		}
		effects = { }
	}
	position_8_debt = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_8_debt"
		
		visible = {
		}
		
		effects = { }
	}

	position_9_gdp = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_9_gdp"
		
		visible = {
		}
		
		effects = { }
	}
	position_10_money = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_10_money"
		
		visible = {
		}
		
		effects = { }
	}	
	position_11_mil_exp = {
		context_type = selected_country_context
		parent_window_token = selected_country_view_diplomacy
		
		window_name = "position_11_mil_exp"
		
		visible = {
		}
		
		effects = { }
	}

	start_influencing = {
		context_type = player_context
		window_name = "CWIC_popup_influence_start"
		
		visible = {
			check_variable = { show_start_influencing = 1 }
		}
		effects = {
			send_button_click = {
				set_variable = { show_start_influencing = 0 }
			}
		}
		triggers = {}
		properties = {}
	}

	stop_influencing = {
		context_type = player_context
		window_name = "CWIC_popup_influence_stop"
		
		visible = {
			check_variable = { show_stop_influencing = 1 }
		}
		effects = {
			send_button_click = {
				clear_variable = influence_target
				set_variable = { show_stop_influencing = 0 }
			}
		}
		triggers = {}
		properties = {}
	}

}