scripted_gui = {

    Finance_tab_menu = {

		context_type = player_context

		window_name = "countryfinanceview"
		visible = {
			check_variable = { show_un = 1 }
            #always = yes
		}	
        properties = {
			Credit_Rating_Icon = {
				image = "[GetCreditRatingGFX]"
			}	
            World_Bank_Flag = {
				image = "[WBK.GetFlag]"
			}	
            IMF_Flag = {
				image = "[GER.GetFlag]"
			}	
            Morgan_Flag = {
				image = "[JPM.GetFlag]"
			}	
            Deustche_Flag = {
				image = "[DBA.GetFlag]"
			}	
            Suisse_Flag = {
				image = "[SKA.GetFlag]"
			}	
            Chiyoda_Flag = {
				image = "[CHY.GetFlag]"
			}	
            Barclays_Flag = {
				image = "[BRC.GetFlag]"
			}	
            Banque_Paris_Flag = {
				image = "[BNP.GetFlag]"
			}	
            Domestic_Bank_Flag = {
				image = "[ROOT.GetFlag]"
			}	
            Reserve_Bank_Flag = {
				image = "[ROOT.GetFlag]"
			}	
        }

        triggers = {
            Current_Debts_Header_visible = {
                check_variable = { show_current_loans = 1 }
            }
            Monthly_Pay_visible = {
                check_variable = { show_current_loans = 1 }
            }
            Interest_Rate_Specific_visible = {
                check_variable = { show_current_loans = 1 }
            }
            Total_Outstanding_visible = {
                check_variable = { show_current_loans = 1 }
            }
            Current_Debts_visible = {
                check_variable = { show_current_loans = 1 }
            }
            #Borrowing
            Potential_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Available_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Term_Length_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Interest_Rate_Borrowing_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Total_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_World_Bank_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            World_Bank_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_IMF_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            IMF_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Potential_Transnational_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Available_Transnational_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Morgan_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Morgan_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Deustche_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Deustche_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Suisse_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Suisse_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Chiyoda_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Chiyoda_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Barclays_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Barclays_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Banque_Paris_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Banque_Paris_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Potential_International_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Available_International_Creditors_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Domestic_Bank_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Bank_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Bank_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Bank_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Domestic_Bank_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Open_Reserve_Bank_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Bank_Title_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Max_Borrowable_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Term_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Rate_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Bank_Flag_frame2_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Bank_Flag_visible = {
                check_variable = { show_current_borrowing = 1 }
            }
            Reserve_Bank_Available_visible = {
                check_variable = { show_current_borrowing = 1 }
            }


        }
		effects = {
            Borrowing_Button_click = {
                set_variable = { show_current_borrowing = 1 }
                set_variable = { show_current_loans = 0 }
            }
            Debts_Button_click = {
                clear_array = currentDebtTotalsArray
                clear_array = currentDebtPaymentArray
                clear_array = currentDebtOwnerArray
                clear_array = currentDebtInterestArray
                for_each_loop = {
                    array = debtOwnerArray
                    index = i
                    if = {
                        limit = {
                            check_variable = {
                                debtTotalsArray^i > 0
                            }
                        }
                        add_to_array = { currentDebtTotalsArray = debtTotalsArray^i }
                        add_to_array = { currentDebtPaymentArray = debtPaymentArray^i }
                        add_to_array = { currentDebtOwnerArray = debtOwnerArray^i }
                        set_variable = {
                            interest_rate_array_adj = debtInterestArray^i
                        }
                        add_to_variable = {
                            interest_rate_array_adj = -1
                        }
                        add_to_array = { currentDebtInterestArray = interest_rate_array_adj }
                    }
                }
                set_variable = { show_current_loans = 1 }
                set_variable = { show_current_borrowing = 0 }
            }
        }
    }
    Finance_Tab_Current_Loans_Section = {
        context_type = player_context
        parent_window_name = countryfinanceview
        window_name = "current_loans_grid"
		visible = {
			check_variable = { show_current_loans = 1 }
		}	
		properties = {
			country_flag_for_current_loans = {
				image = "[THIS.GetFlag]"
			}
        }
		dynamic_lists = { 
			current_debts_listing_grid = {
				array = currentDebtOwnerArray
                change_scope = yes
				entry_container = current_debts_listing_entry
			}
        }
    }
}
scripted_gui = {
	line_graph_sample_scripted_gui = {
		window_name = "line_graph_sample_gui"
		context_type = player_context
        parent_window_name = countryfinanceview
		visible = {
            
		}	
		effects = {
			close_button_click = {
				clr_country_flag = open_line_gui
			}
			add_button_click = {
				# Invoke scripted effect to add a random point to the line
				# See scripted effect file

				SAMPLE_add_random_point_to_line = yes
			}
		}

		# Set up dynamic list to generate one line segment per point
		dynamic_lists = {
			line_segments = {
				array = SAMPLE_graph_offsets
				change_scope = no
				entry_container = line_graph_line_segment
				index = segment_idx
			}
		}

		properties = {
			segment = {
				# Sets they position of the line segment to the graph offset
				# Equal to -y1
				y = SAMPLE_graph_offsets^segment_idx

				# Tells the shader how steep to draw the line
				# Must be equal to (y2 - y1) / 2 + 50
				frame = SAMPLE_graph_slopes^segment_idx
			}
		}

		triggers = {
			# Optional. This hides every other x label, to give them some breathing room
			label_visible = {
				set_temp_variable = { si = segment_idx }
				modulo_temp_variable = { si = 2 }
				check_variable = { si = 0 }
			}
		}
	}
}

scripted_gui = {
	line_graph_debt_scripted_gui = {
		window_name = "line_graph_debt_gui"
		context_type = player_context
        parent_window_name = countryfinanceview
		visible = {
            
		}	
		effects = {
			close_button_click = {
				clr_country_flag = open_line_gui
			}
			add_button_click = {
				# Invoke scripted effect to add a random point to the line
				# See scripted effect file

				SAMPLE_add_random_point_to_line = yes
			}
		}

		# Set up dynamic list to generate one line segment per point
		dynamic_lists = {
			line_segments = {
				array = SAMPLE_graph_offsets
				change_scope = no
				entry_container = debt_line_graph_line_segment
				index = segment_idx
			}
		}

		properties = {
			segment = {
				# Sets they position of the line segment to the graph offset
				# Equal to -y1
				y = SAMPLE_graph_offsets^segment_idx

				# Tells the shader how steep to draw the line
				# Must be equal to (y2 - y1) / 2 + 50
				frame = SAMPLE_graph_slopes^segment_idx
			}
		}

		triggers = {
			# Optional. This hides every other x label, to give them some breathing room
			label_visible = {
				set_temp_variable = { si = segment_idx }
				modulo_temp_variable = { si = 2 }
				check_variable = { si = 0 }
			}
		}
	}
}
