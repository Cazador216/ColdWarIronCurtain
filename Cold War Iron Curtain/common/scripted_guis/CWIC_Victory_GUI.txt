scripted_gui = {
	view_victory_race = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "view_victory_race_container"
		dirty = refresh_topbar
		visible = {
			is_ai = no
		}
		triggers = {
			view_victory_race_button_click_enabled = {
			}
		}
		effects = {
			view_victory_race_button_click = {
				set_temp_variable = { show = 1 }
				subtract_from_temp_variable = { show = refresh_topbar }
				set_variable = { refresh_topbar = show }

				set_temp_variable = { show = 1 }
				subtract_from_temp_variable = { show = show_victory_race_main }
				close_all_windows = yes
				set_variable = { show_victory_race_main = show }
				set_variable = { victory_race_main_pages = show }
			}
		}
	}
	victory_race_main = {
		context_type = player_context
		parent_window_token = top_bar
		window_name = "victory_race_main_container"
		dirty = show_victory_race_main

		visible = {
			check_variable = { show_victory_race_main > 0 }
			is_ai = no
		}

		ai_enabled = {
			always = no
		}
		triggers = {
			red_zone_9_castro_death_visible = {
				has_global_flag = Cuban_Revolution_Castro_Death_End
			}
			red_zone_9_frank_pais_visible = {
				has_global_flag = Cuban_Revolution_Frank_Pais_End
			}
			neutral_zone_2_visible = {
				has_global_flag = Korean_War_Ceasefire_End
			}
			neutral_zone_8_visible = {
				has_global_flag = Suez_Crisis_Withdrawal_End
			}
			neutral_zone_9_visible = {
				has_global_flag = Cuban_Revolution_Directorate_End
			}
			blue_zone_9_american_intervention_visible = {
				has_global_flag = Cuban_Revolution_American_Intervention_End
			}
			ah_pool_yugoslavia_nato_zone_3_visible = {
				has_global_flag = Yugoslavia_Join_Nato_A
			}
			ah_pool_yugoslavia_nato_zone_6_visible = {
				has_global_flag = Yugoslavia_Join_Nato_B
			}
			ah_pool_albanian_subversion_zone_3_visible = {
				has_global_flag = Albanian_Subversion_A
			}
			ah_pool_albanian_subversion_zone_6_visible = {
				has_global_flag = Albanian_Subversion_B
			}
			ah_pool_major_reimann_take_over_7_visible = {
				has_global_flag = DDR_Reimann_Route
			}
			blue_zone_1_visible = {
				has_global_flag = KMT_Chinese_Civil_War_End
			}
			blue_zone_2_visible = {
				has_global_flag = Korean_War_KOR_Victory
			}
			blue_zone_3_visible = {
				has_global_flag = AH_Only
			}
			blue_zone_4_visible = {
				has_global_flag = Greek_Civil_War_Government_Victory
			}
			blue_zone_5_visible = {
				has_global_flag = Indochina_War_French_Victory
			}
			blue_zone_6_visible = {
				has_global_flag = AH_Only
			}
			blue_zone_7_visible = {
				has_global_flag = AH_Only
			}
			blue_zone_8_visible = {
				has_global_flag = Suez_Crisis_Tripartite_Victory
			}
			blue_zone_9_visible = {
				has_global_flag = Cuban_Revolution_Batista_End
			}
			red_zone_1_visible = {
				has_global_flag = PRC_Chinese_Civil_War_End
			}
			red_zone_2_visible = {
				has_global_flag = Korean_War_KPA_Victory
			}
			red_zone_3_visible = {
				has_global_flag = AH_Only
			}
			red_zone_4_visible = {
				has_global_flag = Greek_Civil_War_Communist_Victory
			}
			red_zone_5_visible = {
				has_global_flag = Indochina_War_Viet_Minh_Victory
			}
			red_zone_6_visible = {
				has_global_flag = AH_Only
			}
			red_zone_7_visible = {
				has_global_flag = AH_Only
			}
			red_zone_8_visible = {
				has_global_flag = Suez_Crisis_Egypt_Victory
			}
			red_zone_9_visible = {
				has_global_flag = Cuban_Revolution_OTL_End
			}

			greyed_zone_1_visible = {
				check_variable = { global.grey_zone_var = 0 }
			}
			greyed_zone_2_visible = {
				check_variable = { global.grey_zone_var = 1 }
			}
			greyed_zone_3_visible = {
				check_variable = { global.grey_zone_var = 2 }
			}
			greyed_zone_4_visible = {
				check_variable = { global.grey_zone_var = 3 }
			}
			greyed_zone_5_visible = {
				check_variable = { global.grey_zone_var = 4 }
			}
			greyed_zone_6_visible = {
				check_variable = { global.grey_zone_var = 5 }
			}
			greyed_zone_7_visible = {
				check_variable = { global.grey_zone_var = 6 }
			}
			greyed_zone_8_visible = {
				check_variable = { global.grey_zone_var = 7 }
			}
			greyed_zone_9_visible = {
				check_variable = { global.grey_zone_var = 8 }
			}
		}

		effects = {
			exitbutton_victory_race_click = {
				set_variable = { show_victory_race_main = 0 }
			}
			button_right_page_click = {
				set_global_flag = open_page_2
			}
			button_left_page_click = {
				clr_global_flag = open_page_2
			}
		}
	}
}
