malaysian_emergency_category = {


   Battle_of_Semur_River = {

		available = {
			tag = MAL
			country_exists = MLA
			 date > 1950.3.1
			 date < 1960.1.1
			 has_border_war = no
		}
		
		visible = {
			NOT = { has_country_flag = Semur_River_Battle }
		}
		
		cost = 0

		fire_only_once = yes

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 792
					num_provinces = 3
					on_win = malayan_emergency.8
					on_lose = malayan_emergency.9
					on_cancel = Indochina_War.4
				}
							
				defender = {
					state = 791
					num_provinces = 3
					on_win = malayan_emergency.9
					on_lose = malayan_emergency.8
					on_cancel = Indochina_War.4
				}
			}
			set_country_flag = Semur_River_Battle
		}

		ai_will_do = {
			factor = 1 
		}
	}
   Operation_Termite = {

		available = {
			tag = MAL
			country_exists = MLA
			 date > 1954.1.1
			 date < 1960.1.1
			 has_border_war = no
		}
		
		visible = {
			NOT = { has_country_flag = operation_termite }
		}
		
		cost = 0

		fire_only_once = yes

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 784
					num_provinces = 5
					on_win = malayan_emergency.11
					on_lose = malayan_emergency.12
					on_cancel = Indochina_War.4
				}
							
				defender = {
					state = 791
					num_provinces = 4
					on_win = malayan_emergency.12
					on_lose = malayan_emergency.12
					on_cancel = Indochina_War.4
				}
			}
			set_country_flag = operation_termite
		}

		ai_will_do = {
			factor = 1 
		}
	}
   Raid_Jungle_Bases_from_Kuala_Lumpur = {

		available = {
			tag = MAL
			country_exists = MLA

			has_country_flag = operation_termite 
			has_border_war = no
		}

		days_re_enable = 60

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 784
					num_provinces = 1
					on_win = malayan_emergency.100
					on_lose = malayan_emergency.101
					on_cancel = Indochina_War.4
				}
							
				defender = {
					state = 791
					num_provinces = 1
					on_win = malayan_emergency.101
					on_lose = malayan_emergency.100
					on_cancel = Indochina_War.4
				}
			}
		}

		ai_will_do = {
			factor = 0.10
		}
	}
   Raid_Jungle_Bases_from_Perak = {

		available = {
			tag = MAL
			country_exists = MLA
			has_country_flag = operation_termite 
			has_border_war = no
		}

		days_re_enable = 60

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 960
					num_provinces = 1
					on_win = malayan_emergency.100
					on_lose = malayan_emergency.101
					on_cancel = Indochina_War.4
				}
							
				defender = {
					state = 791
					num_provinces = 1
					on_win = malayan_emergency.101
					on_lose = malayan_emergency.100
					on_cancel = Indochina_War.4
				}
			}
		}

		ai_will_do = {
			factor = 0.10
		}
	}
   Raid_Jungle_Bases_from_Terrengganu = {

		available = {
			tag = MAL
			country_exists = MLA
			has_country_flag = operation_termite 
			has_border_war = no
		}

		days_re_enable = 60

		complete_effect = {
			start_border_war = {
				change_state_after_war = no
				attacker = {
					state = 792
					num_provinces = 1
					on_win = malayan_emergency.100
					on_lose = malayan_emergency.101
					on_cancel = Indochina_War.4
				}
							
				defender = {
					state = 791
					num_provinces = 1
					on_win = malayan_emergency.101
					on_lose = malayan_emergency.100
					on_cancel = Indochina_War.4
				}
			}
		}

		ai_will_do = {
			factor = 1 
		}
	}

	Exile_the_MNLA_to_Thailand = {
		available = {
			tag = MAL
			country_exists = MLA
			has_border_war = no
			check_variable = { MAL.victory_points > 1000 }
			check_variable = { MLA.victory_points < MAL.victory_points }
		}
		cost = 0
		fire_only_once = yes

		complete_effect = {
			annex_country = {
				target = MLA
			}
			set_global_flag = MAL_EMERGENCY_MAL_Victory
			#news_event = malayan_emergency.300 ???
		}
		ai_will_do = {
			factor = 1 
		}
	}

	The_Liberation_of_Malaya = {
	   available = {
			tag = MLA
			country_exists = MAL
			 has_border_war = no
			 check_variable = { MLA.victory_points > 800 }
			 check_variable = { MAL.victory_points < MLA.victory_points }
		}

		cost = 0

		fire_only_once = yes

		complete_effect = {
			annex_country = {
				target = MAL
			}
			transfer_state = 1128
			transfer_state = 924
			set_global_flag = MAL_EMERGENCY_MLA_Victory
			NBO = {
				hidden_effect = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = NBO_DOM
					keep_current_politics = yes
				}
			}
			ENG = {
				set_autonomy = {
					target = SWK
					autonomy_state = autonomy_dominion
					end_wars = no
					end_civil_wars = no
				}
				set_autonomy = {
					target = NBO
					autonomy_state = autonomy_dominion
					end_wars = no
					end_civil_wars = no
				}
			}
			SWK = {
				hidden_effect = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = SWK_DOM
					set_popularities = {
						communism = 11
						monarchism = 59
						neutrality = 21
						socialist = 6
						maoism = 3
					}
					set_politics = {
						ruling_party = monarchism
						elections_allowed = no
					}
					set_party_name = { 
						ideology = monarchism
						name = "WR-NC"
						long_name = "White Rajahs/Negri Council"
					}
				}
			}
			#news_event = malayan_emergency.301 ???
		}


		ai_will_do = {
			factor = 1 
		}
	}
}