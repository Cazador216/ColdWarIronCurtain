SDI_category = {
	SDI_increase_funding = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Secure_Additional_Funding
		}

		available = {
		}

		#custom_cost_trigger = {
		#	check_variable = { var = currentMoney value = 200 compare = greater_than_or_equals }
		#}
		#custom_cost_text = decision_cost_money200

		days_re_enable = 180

		complete_effect = {
			multiply_variable = {
				currentbudget = 0.05
			}
			add_to_variable = {
				sdiFunds = 100
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			custom_effect_tooltip = sdi_increase_funding_effect_tt
		}

		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = currentMoney value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_recruit_scientists = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Recruit_Additional_Scientists_and_Contractors
		}

		available = {
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100														
		fire_only_once = yes
		
		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_to_variable = {
				sdiProgress = 3
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_tech_bonus = {
				name = construction_tech_bonus
				bonus = 0.2
				ahead_reduction = 0.2
				uses = 1
				category = construction_tech
			}
			custom_effect_tooltip = SDI_recruit_scientists_effect_tt
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_BMC3_army_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_army_use_idea
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_BMC3_navy_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_navy_use_idea
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = currentMoney value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_BMC3_air_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_air_use_idea
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
}
SDI_development_research_category = {
	SDI_invest_funds = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {

		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		days_re_enable = 350 # i think if this decision needs to be balanced it would start here

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_to_variable = {
				sdiProgress = 3
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			custom_effect_tooltip = SDI_invest_funds_effect
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_build_laser_prototypes = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Look_into_Space_Based_LASER_Systems
		}
		
		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 250 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_250

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -250
			}
		}
		remove_effect = {
			add_tech_bonus = {
				name = hardware_bonus
				bonus = 0.5
				uses = 2
				ahead_reduction = 0.25
				category = hardware_tech
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.2
				uses = 1
				ahead_reduction = 0.2
				category = space_research
			}
			add_tech_bonus = {
				name = energy_bonus
				bonus = 0.2
				uses = 1
				ahead_reduction = 0.25
				category = energy
			}
			add_to_variable = {
				sdiBreakthroughpercent = 2
			}
			add_to_variable = {
				sdiProgress = 1
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 250 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_design_smaller_hypervelocity_guns = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Designing_a_Hypervelocity_Gun
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 300 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_300

		fire_only_once = yes
		days_remove = 330

		complete_effect = {
			add_to_variable = {
				sdiFunds = -300
			}
		}
		remove_effect = {
			add_ideas = SDI_smaller_hypervelocity_guns
			add_to_variable = {
				sdiBreakthroughpercent = 2
			}
			add_to_variable = {
				sdiProgress = 1
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 300 compare = greater_than_or_equals }
				add = 10
			}
		}

	}
	SDI_develop_better_anti_missile_systems = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_Warning_and_Missile_Defense_Systems
		}

		available = {}
		
		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200
	
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_tech_bonus = {
				name = rocketry_aam
				bonus = 0.5
				uses = 2
				ahead_reduction = 0.25
				category = rocketry_aam
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				uses = 1
				ahead_reduction = 0.25
				category = space_research
			}
			add_to_variable = {
				sdiProgress = 1
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_invest_in_construction_tech = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_Offensive_Missile_Systems
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50

		fire_only_once = yes 

		complete_effect = {
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_tech_bonus = {
				name = construction_tech_bonus
				bonus = 0.5
				uses = 1
				ahead_reduction = 0.25
				category = construction_tech
			}
			add_to_variable = {
				sdiProgress = 1
			}
		}
	}
	SDI_redirect_funds_to_civilian_works = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 77 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_75

		days_re_enable = 160
        days_remove = 160

		complete_effect = {
			add_to_variable = {
				sdiFunds = -75
			}
			add_timed_idea = {
				idea = SDI_redirected_to_civilian_works
				days = 140
			}
			set_variable = { THIS.idea_len_@token:SDI_redirected_to_civilian_works = 140 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_civilian_works = global.num_days }

			set_country_flag = active_redirection
		}

		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_funds_to_general_scientific_research = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}
        days_remove = 100

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 75 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_75

		days_re_enable = 365
		days_remove = 365

		complete_effect = {
			add_to_variable = { sdiFunds = -75 }
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_redirected_to_research
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_redirected_to_research = 120 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_research = global.num_days }
		}

		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_funds_to_military_needs = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 75 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_75

		days_re_enable = 160
        days_remove = 160

		complete_effect = {
			add_to_variable = { sdiFunds = -75 }
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_redirected_to_mil
				days = 140
			}
			set_variable = { THIS.idea_len@token:SDI_redirected_to_mil = 140 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_mil = global.num_days }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	} 
	SDI_redirect_production = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		days_re_enable = 160
        days_remove = 160

		complete_effect = {
			add_to_variable = { sdiProgress = 3 }
			custom_effect_tooltip = redirect_production_effect_tt
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_production_redirected
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_production_redirected = 120 }
			set_variable = { THIS.idea_date_@token:SDI_production_redirected = global.num_days }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_civilian_engineering = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		days_re_enable = 160
		days_remove = 160

		complete_effect = {
			add_to_variable = { sdiProgress = 3 }
			custom_effect_tooltip = redirect_production_effect_tt
			set_country_flag = active_redirection 

			add_timed_idea = {
				idea = SDI_civilian_engineering_redirected
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_civilian_engineering_redirected = 120 }
			set_variable = { THIS.idea_len@token:SDI_civilian_engineering_redirected = 120 }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_invest_in_rocketry = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {

		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		days_re_enable = 365

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_to_variable = {
				sdiProgress = 1
			}
			add_tech_bonus = {
				name = rocketry_bonus 
				bonus = 0.25
				uses = 2
				ahead_reduction = 0.25
				category = rocketry
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_invest_in_manufacturing_and_production = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 250 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_250

		days_re_enable = 660

		complete_effect = {
			add_to_variable = {
				sdiFunds = -250
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_to_variable = {
				sdiProgress = 1
			}
			add_tech_bonus = {
				name = production_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 1
				category = production
			}
			add_tech_bonus = {
				name = manufacturing_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 1
				category = manufacturing
			}
			add_tech_bonus = {
				name = industry_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 2
				category = industry
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 250 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_invest_in_space = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Develop_Warning_and_Missile_Defense_Systems
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 150 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_150

		days_re_enable = 365

		complete_effect = {
			add_to_variable = {
				sdiFunds = -150
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_to_variable = {
				sdiProgress = 1
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 3
				category = space_research
			}
			set_country_flag = investedinspace
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 150 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_space_assets_support_system = {
		visible = {
			has_completed_focus = USA80MIL_Build_a_Manned_Orbitiing_Weapons_Platform
		}

		available = {
			has_country_flag = investedinspace
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_to_variable = {
				sdiBreakthroughpercent = 2
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 2
				category = space_research
			}
			add_tech_bonus = {
				name = construction_bonus
				bonus = 0.25
				ahead_reduction = 0.2
				uses = 1
				category = construction_tech
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_invest_in_modern_infrastructure = {
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}
		
		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 150 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_150
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -150
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_tech_bonus = {
				name = construction_bonus
				bonus = 0.25
				ahead_reduction = 0.2
				uses = 1
				category = construction_tech
			}
			add_tech_bonus = {
				name = infrastructure_bonus
				bonus = 0.25
				ahead_reduction = 0.2
				uses = 1
				category = infrastructure
			}
			add_tech_bonus = {
				name = materials_bonus 
				bonus = 0.25
				ahead_reduction = 0.2
				uses = 1
				category = materials
			}
			add_to_variable = {
				sdiProgress = 1
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 150 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
	SDI_find_efficient_fuel_source = {
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_to_variable = {
				sdiBreakthroughpercent = 1
			}
			add_to_variable = {
				sdiProgress = 1
			}
			add_tech_bonus = {
				name = gas_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 2
				category = gas
			}
			add_tech_bonus = {
				name = renewables_bonus
				bonus = 0.26
				ahead_reduction = 0.25
				uses = 1
				category = renewables
			}
		}
		ai_will_do = {
			factor = 0
			modifier = {
				check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
				add = 10
			}
		}
	}
}

# rocketry rocketry_aam aam_long_range space_research energy production manufacturing
# construction_tech materials synth_resources chemistry infrastructure renewables gas