SDI_category = {
	SDI_increase_funding = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Secure_Additional_Funding
		}

		available = {
		}

		custom_cost_trigger = {
			check_variable = { var = currentMoney value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = decision_cost_money200

		days_re_enable = 160

		complete_effect = {
			add_to_variable = {
				currentMoney = -200
			}
			add_to_variable = {
				sdiFunds = 200
			}
			custom_effect_tooltip = sdi_increase_funding_effect_tt
		}

		ai_will_do = {
			factor = 0
			modifier = {
				if = {
					check_variable = { var = currentMoney value = 200 compare = greater_than_or_equals }
				}
				add = 10
			}
		}
	}
	SDI_recruit_scientists = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Recruit_Additional_Scientists_and_Contractors
		}

		available = {
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50														
		fire_only_once = yes
		
		complete_effect = {
			add_to_variable = {
				sdiFunds = -50
			}
			add_to_variable = {
				sdiProgress = 3
			}
			custom_effect_tooltip = SDI_recruit_scientists_effect_tt
		}
	}
	SDI_BMC3_army_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_army_use_idea
		}
	}
	SDI_BMC3_navy_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_navy_use_idea
		}
	}
	SDI_BMC3_air_use = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_the_BM_C3_System
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
		}
		remove_effect = {
			add_ideas = SDI_BMC3_air_use_idea
		}
	}
}
SDI_development_research_category = {
	SDI_invest_funds = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {

		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		days_re_enable = 365 # i think if this decision needs to be balanced it would start here

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_to_variable = {
				sdiProgress = 6
			}
			custom_effect_tooltip = SDI_invest_funds_effect
		}
	}
	SDI_build_laser_prototypes = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Look_into_Space_Based_LASER_Systems
		}
		
		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		fire_only_once = yes

		days_remove = 120
		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
		}
		remove_effect = {
			add_tech_bonus = {
				name = hardware_bonus
				bonus = 0.5
				use = 2
				ahead_reduction = 0.25
				category = hardware_tech
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.2
				use = 1
				ahead_reduction = 0.2
				category = space_research
			}
			add_tech_bonus = {
				name = energy_bonus
				bonus = 0.2
				use = 1
				ahead_reduction = 0.25
				category = energy
			}
		}
	}
	SDI_design_smaller_hypervelocity_guns = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Designing_a_Hypervelocity_Gun
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200

		fire_only_once = yes
		days_remove = 300

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
		}
		remove_effect = {
			add_ideas = SDI_smaller_hypervelocity_guns
		}

	}
	SDI_develop_better_anti_missile_systems = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_Warning_and_Missile_Defense_Systems
		}

		available = {}
		
		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 200 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_200
	
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -200
			}
			add_tech_bonus = {
				name = rocketry_aam
				bonus = 0.5
				uses = 2
				ahead_reduction = 0.25
				category = rocketry_aam
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				uses = 1
				ahead_reduction = 0.25
				category = space_research
			}
		}
	}
	SDI_invest_in_construction_tech = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Develop_Offensive_Missile_Systems
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50

		fire_only_once = yes 

		complete_effect = {
			add_tech_bonus = {
				name = construction_tech_bonus
				bonus = 0.5
				uses = 1
				ahead_reduction = 0.25
				category = construction_tech
			}
		}
	}
	SDI_redirect_funds_to_civilian_works = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50

		days_re_enable = 160

		complete_effect = {
			add_to_variable = {
				sdiFunds = -50
			}
			add_timed_idea = {
				idea = SDI_redirected_to_civilian_works
				days = 140
			}
			set_variable = { THIS.idea_len_@token:SDI_redirected_to_civilian_works = 140 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_civilian_works = global.num_days }

			set_country_flag = active_redirection
		}

		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_funds_to_general_scientific_research = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50

		days_re_enable = 365

		complete_effect = {
			add_to_variable = { sdiFunds = -50 }
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_redirected_to_research
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_redirected_to_research = 120 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_research = global.num_days }
		}

		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_funds_to_military_needs = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 50 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_50

		days_re_enable = 160

		complete_effect = {
			add_to_variable = { sdiFunds = -50 }
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_redirected_to_mil
				days = 140
			}
			set_variable = { THIS.idea_len@token:SDI_redirected_to_mil = 140 }
			set_variable = { THIS.idea_date_@token:SDI_redirected_to_mil = global.num_days }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	} 
	SDI_redirect_production = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		days_re_enable = 160

		complete_effect = {
			add_to_variable = { sdiProgress = 3 }
			custom_effect_tooltip = redirect_production_effect_tt
			set_country_flag = active_redirection

			add_timed_idea = {
				idea = SDI_production_redirected
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_production_redirected = 120 }
			set_variable = { THIS.idea_date_@token:SDI_production_redirected = global.num_days }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_redirect_civilian_engineering = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {
			NOT = { has_country_flag = active_redirection }
		}

		days_re_enable = 160

		complete_effect = {
			add_to_variable = { sdiProgress = 3 }
			custom_effect_tooltip = redirect_production_effect_tt
			set_country_flag = active_redirection 

			add_timed_idea = {
				idea = SDI_civilian_engineering_redirected
				days = 120
			}
			set_variable = { THIS.idea_len@token:SDI_civilian_engineering_redirected = 120 }
			set_variable = { THIS.idea_len@token:SDI_civilian_engineering_redirected = 120 }
		}
		remove_effect = {
			clr_country_flag = active_redirection
		}
	}
	SDI_invest_in_rocketry = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {

		}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		days_re_enable = 365

		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_tech_bonus = {
				name = rocketry_bonus 
				bonus = 0.25
				uses = 2
				ahead_reduction = 0.25
				category = rocketry
			}
		}
	}
	SDI_invest_in_manufacturing_and_production = {
		icon = generic_construction

		visible = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		days_re_enable = 660

		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_tech_bonus = {
				name = production_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 1
				category = production
			}
			add_tech_bonus = {
				name = manufacturing_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 1
				category = manufacturing
			}
			add_tech_bonus = {
				name = industry_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 2
				category = industry
			}
		}
	}
	SDI_invest_in_space = {
		icon = generic_construction
		
		visible = {
			has_completed_focus = USA80MIL_Develop_Warning_and_Missile_Defense_Systems
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100

		days_re_enable = 365

		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 3
				category = space_research
			}
		}
	}
	SDI_progress_set_back = {
		activation = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}
		available = {
			has_completed_focus = USA80MIL_Begin_Star_Wars_Development
		}
		cancel_trigger = {
			#could potentially take funds to stop a set back if balancing for SDI is needed
		}

		icon = generic_construction 
		days_mission_timeout = 365

		complete_effect = {
			activate_mission = SDI_progress_set_back
			add_to_variable = {
				sdiProgress = -2
			}
		}
	}
	SDI_space_assets_support_system = {
		visible = {
			has_completed_focus = USA80MIL_Build_a_Manned_Orbitiing_Weapons_Platform
		}

		available = {}

		custom_cost_trigger = {
			check_variable = { var = sdiFunds value = 100 compare = greater_than_or_equals }
		}
		custom_cost_text = sdiFunds_cost_100
		fire_only_once = yes

		complete_effect = {
			add_to_variable = {
				sdiFunds = -100
			}
			add_tech_bonus = {
				name = space_bonus
				bonus = 0.25
				ahead_reduction = 0.25
				uses = 2
				category = space_research
			}
		}
	}
}

# rocketry rocketry_aam aam_long_range space_research energy production manufacturing
# construction_tech materials synth_resources chemistry infrastructure renewables gas