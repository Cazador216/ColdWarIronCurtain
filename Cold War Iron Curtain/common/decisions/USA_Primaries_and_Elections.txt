CONGRESS_US = {
    The_Media_Cycle = {
        icon = generic_operation

        allowed = {
            tag = USA
        }

        available = {
            custom_trigger_tooltip = {
                tooltip = media_cycle_available_TT		
                always = no
            }
            
        } 

        days_mission_timeout = 7
		days_remove = 1 

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            custom_effect_tooltip = "DEM_ADS_TT"
            #AI DO STUFF HERE


            #Weekly Stat Resets
            Weekly_Primary_Stat_Updates = yes

            #Media Cycle Dates for GUI
            set_variable = {
                current_media_cycle_start = global.num_days
            }
            add_to_variable = {
                current_media_cycle_start = 1    #Date Format Fix
            }
            set_variable = {
                next_media_cycle_start = current_media_cycle_start
            }
            add_to_variable = {
                next_media_cycle_start = 7    
            }
            set_variable = {
                second_next_media_cycle_start = next_media_cycle_start
            }
            add_to_variable = {
                second_next_media_cycle_start = 7    
            }

            modulo_variable = {
                var = current_media_cycle_start
                value = 365
            }
            modulo_variable = {
                var = next_media_cycle_start
                value = 365
            }
            modulo_variable = {
                var = second_next_media_cycle_start
                value = 365
            }
            #December
            if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 334
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 12
                }
                add_to_variable = {
                    current_media_cycle_start = -334
                }              
            }
            #November
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 304
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 11
                }
                add_to_variable = {
                    current_media_cycle_start = -304
                }              
            }
            #October
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 273
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 10
                }
                add_to_variable = {
                    current_media_cycle_start = -273
                }              
            }
            #September
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 243
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 9
                }
                add_to_variable = {
                    current_media_cycle_start = -243
                }              
            }
            #August
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 212
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 8
                }
                add_to_variable = {
                    current_media_cycle_start = -212
                }              
            }
            #July
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 181
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 7
                }
                add_to_variable = {
                    current_media_cycle_start = -181
                }              
            }
            #June
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 151
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 6
                }
                add_to_variable = {
                    current_media_cycle_start = -151
                }              
            }
            #May
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 120
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 5
                }
                add_to_variable = {
                    current_media_cycle_start = -120
                }              
            }
            #April
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 90
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 4
                }
                add_to_variable = {
                    current_media_cycle_start = -90
                }              
            }
            #March
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 59
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 3
                }
                add_to_variable = {
                    current_media_cycle_start = -59
                }              
            }
            #February
            else_if = {
                limit = {
                    check_variable = {
                        current_media_cycle_start > 31
                    }
                }
                set_variable = {
                    current_media_cycle_start_month = 2
                }
                add_to_variable = {
                    current_media_cycle_start = -31
                }              
            }
            #January
            else = {
                set_variable = {
                    current_media_cycle_start_month = 1
                }
            }
            #December
            if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 334
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 12
                }
                add_to_variable = {
                    next_media_cycle_start = -334
                }              
            }
            #November
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 304
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 11
                }
                add_to_variable = {
                    next_media_cycle_start = -304
                }              
            }
            #October
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 273
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 10
                }
                add_to_variable = {
                    next_media_cycle_start = -273
                }              
            }
            #September
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 243
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 9
                }
                add_to_variable = {
                    next_media_cycle_start = -243
                }              
            }
            #August
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 212
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 8
                }
                add_to_variable = {
                    next_media_cycle_start = -212
                }              
            }
            #July
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 181
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 7
                }
                add_to_variable = {
                    next_media_cycle_start = -181
                }              
            }
            #June
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 151
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 6
                }
                add_to_variable = {
                    next_media_cycle_start = -151
                }              
            }
            #May
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 120
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 5
                }
                add_to_variable = {
                    next_media_cycle_start = -120
                }              
            }
            #April
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 90
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 4
                }
                add_to_variable = {
                    next_media_cycle_start = -90
                }              
            }
            #March
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 59
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 3
                }
                add_to_variable = {
                    next_media_cycle_start = -59
                }              
            }
            #February
            else_if = {
                limit = {
                    check_variable = {
                        next_media_cycle_start > 31
                    }
                }
                set_variable = {
                    next_media_cycle_start_month = 2
                }
                add_to_variable = {
                    next_media_cycle_start = -31
                }              
            }
            #January
            else = {
                set_variable = {
                    next_media_cycle_start_month = 1
                }
            }
            #December
            if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 334
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 12
                }
                add_to_variable = {
                    second_next_media_cycle_start = -334
                }              
            }
            #November
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 304
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 11
                }
                add_to_variable = {
                    second_next_media_cycle_start = -304
                }              
            }
            #October
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 273
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 10
                }
                add_to_variable = {
                    second_next_media_cycle_start = -273
                }              
            }
            #September
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 243
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 9
                }
                add_to_variable = {
                    second_next_media_cycle_start = -243
                }              
            }
            #August
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 212
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 8
                }
                add_to_variable = {
                    second_next_media_cycle_start = -212
                }              
            }
            #July
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 181
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 7
                }
                add_to_variable = {
                    second_next_media_cycle_start = -181
                }              
            }
            #June
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 151
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 6
                }
                add_to_variable = {
                    second_next_media_cycle_start = -151
                }              
            }
            #May
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 120
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 5
                }
                add_to_variable = {
                    second_next_media_cycle_start = -120
                }              
            }
            #April
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 90
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 4
                }
                add_to_variable = {
                    second_next_media_cycle_start = -90
                }              
            }
            #March
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 59
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 3
                }
                add_to_variable = {
                    second_next_media_cycle_start = -59
                }              
            }
            #February
            else_if = {
                limit = {
                    check_variable = {
                        second_next_media_cycle_start > 31
                    }
                }
                set_variable = {
                    second_next_media_cycle_start_month = 2
                }
                add_to_variable = {
                    second_next_media_cycle_start = -31
                }              
            }
            #January
            else = {
                set_variable = {
                    second_next_media_cycle_start_month = 1
                }
            }

            #Advert Effects Here
            #dem_primary_ad_cycle_buyer = Playing_As                      #Buyer
            #dem_primary_ad_cycle_type = selected_dem_topic               #Topic
            #dem_primary_ad_cycle_target = dem_primary_ad_target_selected #Target
            #dem_primary_ad_cycle_state = USA_DEM_PRIMARY_MEDIA_DETAILS   #State
            #dem_primary_ad_cycle_status = 2                              #When Ads Conclude (2 Media Cycles Away)
            #dem_primary_ad_cycle_format = media_type                     #Newspaper, Radio, TV
            #dem_primary_ad_cycle_target_position                         #Target Position

            
            for_each_loop = {
                array = dem_primary_ad_cycle_buyer  
                if = {
                    limit = {
                        check_variable = {
                            dem_primary_ad_cycle_status^i = 2
                        }
                    }
                    add_to_variable = {
                        dem_primary_ad_cycle_status^i = -1
                    }
                }
                else_if = {
                    limit = {
                        check_variable = {
                            dem_primary_ad_cycle_status^i = 1
                        }
                    }
                    add_to_variable = {
                        dem_primary_ad_cycle_status^i = -1
                    }

                    Democratic_Ad_Position_Finder = yes #Get Position of Target
                    if = {
                        limit = {
                            check_variable = { 
                                dem_primary_ad_cycle_type^i = 1
                            }
                        }
                        set_variable = {
                            support_modifier = 1
                        }
                    }
                    if = {
                        limit = {
                            check_variable = {
                                dem_primary_ad_cycle_type^i = 2
                            }
                        }
                        set_variable = {
                            support_modifier = -1
                        }
                    }
                    else = {
                        set_variable = {
                            support_modifier = 1
                        }                      
                    }
                    randomize_variable = {
                        var = Support_Change
                        distribution = uniform
                        min = 0.5
                        max = 2
                    }
                    multiply_variable = {
                        Support_Change = dem_primary_ad_cycle_format^i
                    }
                    multiply_variable = {
                        Support_Change = support_modifier
                    }
                    var:dem_primary_ad_cycle_state^i = {
                        add_to_variable = {
                            Canidate_Support^USA.dem_primary_ad_cycle_target_position = USA.Support_Change
                        }
                    }
                }
                else = {
                }
            }
            #Refresh Map Here
            generate_campaign_map_numbers_dem = yes

            activate_mission = The_Media_Cycle
        }
    }
    DEM_New_Hampshire_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 862.primary_mission_duration_timeout
		days_remove = 862.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            862 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Massachusetts_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 357.primary_mission_duration_timeout
		days_remove = 357.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            357 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Florida_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 366.primary_mission_duration_timeout
		days_remove = 366.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            366 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Illinois_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 395.primary_mission_duration_timeout
		days_remove = 395.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            395 = {
                for_loop_effect = {
                    end = canidate_listing_array_percentage^num
                    value = v
                    randomize_variable = {
                        var = Margin_of_Error
                        distribution = uniform
                        min = -4
                        max = 4
                    }
                    add_to_variable = {
                        canidate_listing_array_percentage^v = Margin_of_Error
                    }
                }
            }
            generate_campaign_map_numbers_dem = yes
            395 = {
                set_variable = {
                    CurrentDemStateWinner = canidate_listing_array^0
                }
            }
        }
    }
    DEM_Wisconsin_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 394.primary_mission_duration_timeout
		days_remove = 394.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            394 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Pennsylvania_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 360.primary_mission_duration_timeout
		days_remove = 360.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            360 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_DC_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 1200.primary_mission_duration_timeout
		days_remove = 1200.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            1200 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Nebraska_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 384.primary_mission_duration_timeout
		days_remove = 384.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            384 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Oregon_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 385.primary_mission_duration_timeout
		days_remove = 385.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            385 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_California_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 378.primary_mission_duration_timeout
		days_remove = 378.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            378 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_New_Jersey_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 359.primary_mission_duration_timeout
		days_remove = 359.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            359 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_South_Dakota_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 390.primary_mission_duration_timeout
		days_remove = 390.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            390 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_West_Virginia_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 859.primary_mission_duration_timeout
		days_remove = 859.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            859 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
    DEM_Minnesota_Primary = {
        icon = generic_operation

        allowed = {
        }

        available = {
            always = no
        } 

        days_mission_timeout = 391.primary_mission_duration_timeout
		days_remove = 391.primary_mission_duration_timeout

        fire_only_once = no

        activation = {
            always = no
        }
        modifier = {
        }    

        timeout_effect = {
            391 = {
                Calculate_Dem_Primary_Winner = yes
            }
        }
    }
}