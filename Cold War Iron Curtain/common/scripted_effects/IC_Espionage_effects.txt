launch_operation_effect = {
	add_to_variable = { 
		current_operations = 1
	}
	if = {
		limit = {
			check_variable = {
				current_operations = 1
			}	
		}
		set_variable = {
			slot_one_target = selected_operation_index_target
		}
		set_variable = {
			slot_one_personnel_target = selected_operation_personnel_target
		}
		
		set_variable = {
			selected_squad_slot_1_Current_Page_Ref = selected_squad_origin
		}
		set_variable = {
			selected_squad_slot_1 = selected_squad_origin
		}
		add_to_variable = {
			selected_squad_slot_1 = -1
		}
		set_variable = {
			paramilitary_squad_id_status^selected_squad_slot_1 = 2
		}
		set_variable = {
			slot_one_time_duration = selected_operation_index_mission_duration
		}
		set_variable = {
			slot_one_mission_token = selected_operation_index_id_token
		}
		add_to_array = {
			current_operation_list = selected_operation_index_id_token
		}
		set_variable = {
			slot_one_risk = selected_operation_index_risk
		}
		adjust_operation_risk_modifier = yes
		set_variable = {
			slot_one_actual_risk = selected_operation_index_risk
		}
		subtract_from_variable = {
			currentMoney = selected_operation_index_cost
		}
		activate_mission = Espionage_Operation_Slot_1
	}
}
refresh_possible_mission_types = {

}
slot_1_operation_success_shared_effect = {
	set_variable = {
		current_page = selected_squad_slot_1_Current_Page_Ref
	}
	meta_effect = { 
		text = {
			add_to_array = {
				array = black_ops_group_[ARRAY_NUMBER]_history
				value = global.date      #Established Date
			}
			add_to_array = {
				array = black_ops_group_[ARRAY_NUMBER]_history_entry
				value = current_token
			}
			add_to_array = {
				array = black_ops_group_[ARRAY_NUMBER]_history_entry_flag
				value = history_target.id      
			}
			add_to_array = {
				array = black_ops_group_[ARRAY_NUMBER]_history_entry_status
				value = 1
			}
		}
		ARRAY_NUMBER = "[?selected_squad_slot_1_Current_Page_Ref]"
	}    
	randomize_variable = {
		var = slot_1_operative_1_experience_gain
		distribution = uniform
		min = 5
		max = 10
	}
	randomize_variable = {
		var = slot_1_operative_2_experience_gain
		distribution = uniform
		min = 5
		max = 10
	}
	randomize_variable = {
		var = slot_1_operative_3_experience_gain
		distribution = uniform
		min = 5
		max = 10
	}
	randomize_variable = {
		var = slot_1_operative_4_experience_gain
		distribution = uniform
		min = 5
		max = 10
	}
	randomize_variable = {
		var = slot_1_operative_5_experience_gain
		distribution = uniform
		min = 5
		max = 10
	}
	round_variable = slot_1_operative_1_experience_gain
	round_variable = slot_1_operative_2_experience_gain
	round_variable = slot_1_operative_3_experience_gain
	round_variable = slot_1_operative_4_experience_gain
	round_variable = slot_1_operative_5_experience_gain
	add_to_variable = {
		operative_1_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_1_experience_gain
	}
	add_to_variable = {
		operative_2_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_2_experience_gain
	}
	add_to_variable = {
		operative_3_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_3_experience_gain
	}
	add_to_variable = {
		operative_4_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_4_experience_gain
	}
	add_to_variable = {
		operative_5_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_5_experience_gain
	}
	set_variable = {
		paramilitary_slot_one_bulletin = 1
	}
}
slot_1_operation_failure_effect = {
    set_variable = {
        current_page = selected_squad_slot_1_Current_Page_Ref
    }
    meta_effect = { 
        text = {
            add_to_array = {
                array = black_ops_group_[ARRAY_NUMBER]_history
                value = global.date      #Established Date
            }
            add_to_array = {
                array = black_ops_group_[ARRAY_NUMBER]_history_entry
                value = current_token
            }
            add_to_array = {
                array = black_ops_group_[ARRAY_NUMBER]_history_entry_flag
                value = history_target.id      
            }
            add_to_array = {
                array = black_ops_group_[ARRAY_NUMBER]_history_entry_status
                value = 2    
            }

        }
        ARRAY_NUMBER = "[?selected_squad_slot_1_Current_Page_Ref]"
    }    
    randomize_variable = {
        var = slot_1_operative_1_experience_gain
        distribution = uniform
        min = 1
        max = 5
    }
    randomize_variable = {
        var = slot_1_operative_2_experience_gain
        distribution = uniform
        min = 1
        max = 5
    }
    randomize_variable = {
        var = slot_1_operative_3_experience_gain
        distribution = uniform
        min = 1
        max = 5
    }
    randomize_variable = {
        var = slot_1_operative_4_experience_gain
        distribution = uniform
        min = 1
        max = 5
    }
    randomize_variable = {
        var = slot_1_operative_5_experience_gain
        distribution = uniform
        min = 1
        max = 5
    }
    round_variable = slot_1_operative_1_experience_gain
    round_variable = slot_1_operative_2_experience_gain
    round_variable = slot_1_operative_3_experience_gain
    round_variable = slot_1_operative_4_experience_gain
    round_variable = slot_1_operative_5_experience_gain
    add_to_variable = {
        operative_1_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_1_experience_gain
    }
    add_to_variable = {
        operative_2_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_2_experience_gain
    }
    add_to_variable = {
        operative_3_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_3_experience_gain
    }
    add_to_variable = {
        operative_4_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_4_experience_gain
    }
    add_to_variable = {
        operative_5_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_5_experience_gain
    }
    set_variable = {
        paramilitary_slot_one_bulletin = 1
    }
}

adjust_operation_risk_modifier = {
	if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 1
			}
		}
		set_variable = {
			current_actual_risk = 0.10
		}
	}
	else_if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 2
			}
		}
		set_variable = {
			current_actual_risk = 0.25
		}
	}
	else_if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 3
			}
		}
		set_variable = {
			current_actual_risk = 0.40
		}
	}
	else_if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 4
			}
		}
		set_variable = {
			current_actual_risk = 0.55
		}
	}
	else_if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 5
			}
		}
		set_variable = {
			current_actual_risk = 0.70
		}
	}
	else_if = {
		limit = {
			check_variable = {
				selected_operation_index_risk = 6
			}
		}
		set_variable = {
			current_actual_risk = 0.85
		}
	}
	else = { }
}
operation_closeout_effect = {
	if = {	#Setting up Blacksite
		limit = {
			check_variable = {
				current_token = 1 
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes
            
            #Specific Effects
			set_variable = { espionage_network_status^history_target = 1 }
			set_variable = { network_strength^history_target = 0.15 }
			remove_from_array = { local_generic_possible_operations_operation_type = 100 }

            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 2 #Expand Intelligence Network
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes
            
            #Specific Effects
			randomize_variable = {
				var = Network_Strength_Gain
				distribution = uniform
				min = 0.05
				max = 0.20
			}
			add_to_variable = { network_strength^history_target = Network_Strength_Gain }

            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 3 #Assasinate General
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_target = {
				retire_character = history_personnel_target
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 4 #Assasinate Admiral
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_target = {
				retire_character = history_personnel_target
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	#5 Not Implemented Yet: Sabotage Nuclear Programme
	if = {	
		limit = {
			check_variable = {
				current_token = 6 #Sabotage Nuclear Site
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = nuclear_reactor
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_nuclear_reactor
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 7 #Sabotage Airfield
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = air_base
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_air_base
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 8 #Sabotage Arms Factory
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = arms_factory
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_arms_factory
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 9 #Sabotage Dockyard
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = dockyard
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_dockyard
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 10 #Sabotage Port
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = naval_base
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_naval_base
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 11 #Sabotage Factory
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = industrial_complex
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_factory
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 12 #Sabotage Infrastructure
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = infrastructure
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_infrastructure
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 13 #Terrorist Attack
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_target = {
				country_event = Generic_Terrorist_Attack.0
				news_event = Generic_Terrorist_Attack.1
				add_stability = -0.02
			}
			var:history_personnel_target = {
				random_list = {
					25 = {
						damage_building = {
							type = infrastructure
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					25 = {
						damage_building = {
							type = state_infrastructure
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					25 = {
						damage_building = {
							type = water_infrastructure
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					25 = {
						damage_building = {
							type = agri_industrial_complex
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					25 = {
						damage_building = {
							type = industrial_complex
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					20 = {
						damage_building = {
							type = arms_factory
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					20 = {
						damage_building = {
							type = office_park
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					10 = {
						damage_building = {
							type = dockyard
							damage = 3
						}
					}
					80 = { }
				}
				random_list = {
					5 = {
						damage_building = {
							type = naval_base
							damage = 3
						}
					}
					80 = { }
				}
				add_dynamic_modifier = {
					modifier = recent_terrorist_attack
					days = 60
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 14 #Local Uprising
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				add_resistance = 200
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	if = {	
		limit = {
			check_variable = {
				current_token = 15 #Local Uprising
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				add_to_array = {
					local_resistance_contacts = ROOT
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}

		#Train Local Resistance Group
		#Arm Local Resistance Group
		#Insurgency Embed
		#Counter-Espionage Emded
		#Steal Tech
		#Counter-Insurgency Operation
	if = {	
		limit = {
			check_variable = {
				current_token = 22 #Sabotage Railways
			}
		}
		set_variable_to_random = success_chance
		if = {	#Success
			limit = {
				OR = {
					check_variable = {
						success_chance > current_actual_risk
					}
					check_variable = {
						current_actual_risk = success_chance
					}
				}
			}
            slot_1_operation_success_shared_effect = yes

            #Specific Effects
			var:history_personnel_target = {
				damage_building = {
					type = railway
					damage = 3
				}
				add_dynamic_modifier = {
					modifier = damaged_railway
					days = 30
				}
			}
            #End
            refresh_possible_mission_types = yes
		}
        else = {	#Failure
            slot_1_operation_failure_effect = yes
        }
	}
	#Bay of Pigs (BOP)
	else_if = {
		limit = {
			check_variable = {
				current_token = 100
			}
		}
		set_country_flag = Cuban_Emigre_Contacts_Token
		set_variable = {
			current_page = selected_squad_slot_1_Current_Page_Ref
		}
		meta_effect = { 
			text = {
				add_to_array = {
					array = black_ops_group_[ARRAY_NUMBER]_history
					value = global.date      #Established Date
				}
				add_to_array = {
					array = black_ops_group_[ARRAY_NUMBER]_history_entry
					value = current_token
				}
				add_to_array = {
					array = black_ops_group_[ARRAY_NUMBER]_history_entry_flag
					value = history_target.id      
				}
			}
			ARRAY_NUMBER = "[?selected_squad_slot_1_Current_Page_Ref]"
		}    
		randomize_variable = {
			var = slot_1_operative_1_experience_gain
			distribution = uniform
			min = 1
			max = 10
		}
		randomize_variable = {
			var = slot_1_operative_2_experience_gain
			distribution = uniform
			min = 1
			max = 10
		}
		randomize_variable = {
			var = slot_1_operative_3_experience_gain
			distribution = uniform
			min = 1
			max = 10
		}
		randomize_variable = {
			var = slot_1_operative_4_experience_gain
			distribution = uniform
			min = 1
			max = 10
		}
		randomize_variable = {
			var = slot_1_operative_5_experience_gain
			distribution = uniform
			min = 1
			max = 10
		}
		round_variable = slot_1_operative_1_experience_gain
		round_variable = slot_1_operative_2_experience_gain
		round_variable = slot_1_operative_3_experience_gain
		round_variable = slot_1_operative_4_experience_gain
		round_variable = slot_1_operative_5_experience_gain
		add_to_variable = {
			operative_1_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_1_experience_gain
		}
		add_to_variable = {
			operative_2_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_2_experience_gain
		}
		add_to_variable = {
			operative_3_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_3_experience_gain
		}
		add_to_variable = {
			operative_4_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_4_experience_gain
		}
		add_to_variable = {
			operative_5_current_experience^selected_squad_slot_1_Current_Page_Ref = slot_1_operative_5_experience_gain
		}
		set_variable = {
			paramilitary_slot_one_bulletin = 1
		}
	}
	
}

add_assassinate_generals_operations = {
	for_each_loop = {   #Assasinate Generals
		array = army_leaders
		add_to_array = { ROOT.local_possible_operations = 3 }
		add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
		add_to_array = { ROOT.local_possible_operations_operation_type = 7 }
		add_to_array = { ROOT.local_possible_operations_money_cost = 100 }
		add_to_array = { ROOT.local_possible_operations_repeatable_condition = 1 }
	
		add_to_array = { ROOT.local_possible_operations_id_token = 3 }
		add_to_array = { ROOT.local_possible_operations_personnel_target = v }
		add_to_array = { ROOT.local_possible_operations_target = THIS.id }
	}
}
add_assassinate_admirals_operations = {
	for_each_loop = {   
		array = navy_leaders
		add_to_array = { ROOT.local_possible_operations = 4 }
		add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
		add_to_array = { ROOT.local_possible_operations_operation_type = 7 }
		add_to_array = { ROOT.local_possible_operations_money_cost = 100 }
		add_to_array = { ROOT.local_possible_operations_repeatable_condition = 1 }
	
		add_to_array = { ROOT.local_possible_operations_id_token = 4 }
		add_to_array = { ROOT.local_possible_operations_personnel_target = v }
		add_to_array = { ROOT.local_possible_operations_target = THIS.id }
	}
}
                    #Sabotage Nuclear Programme
add_nuclear_site_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				nuclear_reactor > 0
			}
			add_to_array = { ROOT.local_possible_operations = 6 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 6 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 100 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 6 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}

add_air_base_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				air_base > 0
			}
			add_to_array = { ROOT.local_possible_operations = 7 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 7 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_arms_factory_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				arms_factory > 0
			}
			add_to_array = { ROOT.local_possible_operations = 8 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 8 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_dockyard_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				dockyard > 0
			}
			add_to_array = { ROOT.local_possible_operations = 9 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 9 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_naval_base_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				naval_base > 0
			}
			add_to_array = { ROOT.local_possible_operations = 10 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 10 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_factory_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				industrial_complex > 0
			}
			add_to_array = { ROOT.local_possible_operations = 11 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 11 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_infrastructure_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				infrastructure > 0
			}
			add_to_array = { ROOT.local_possible_operations = 12 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 11 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 12 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_terrorist_attack_operations = {
	for_each_scope_loop = {
		array = controlled_states
		for_each_loop = {   
			array = vp_provinces
			if = {
				limit = {
					check_variable = {
						vp_values^i > 0
					}
				}
				add_to_array = { ROOT.local_possible_operations = 13 }
				add_to_array = { ROOT.local_possible_operations_risk_level = 6 }
				add_to_array = { ROOT.local_possible_operations_operation_type = 21 }
				add_to_array = { ROOT.local_possible_operations_money_cost = 100 }
				add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
			
				add_to_array = { ROOT.local_possible_operations_id_token = 13 }
				add_to_array = { ROOT.local_possible_operations_personnel_target = v }
				add_to_array = { ROOT.local_possible_operations_target = PREV.id }
			}
		}
	}
}
                    #Blow Up Key Infrastructure

add_local_uprising_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				OR = {
					AND = {
						is_core_of = ROOT
						resistance > 25
					}
					resistance > 75
				}
			}
			add_to_array = { ROOT.local_possible_operations = 14 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 6 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 24 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 100 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 14 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_resistance_contacts_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				has_active_resistance = yes
				NOT = { is_in_array = { local_resistance_contacts = ROOT } }
			}
			add_to_array = { ROOT.local_possible_operations = 15 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 22 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 15 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_train_resistance_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				has_active_resistance = yes
				is_in_array = { local_resistance_contacts = ROOT } 
				NOT = {
					has_state_flag = Recent_Resistance_Training_Mission
				}
				#NOT = {
				#	has_dynamic_modifier = {
				#		modifier = trained_resistance
				#	}
				#}
			}
			add_to_array = { ROOT.local_possible_operations = 16 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 3 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 18 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 16 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_arm_resistance_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				has_active_resistance = yes
				is_in_array = { local_resistance_contacts = ROOT } 
				NOT = {
					has_state_flag = Recent_Resistance_Arming_Mission
				}
				#NOT = {
				#	has_dynamic_modifier = {
				#		modifier = trained_resistance
				#	}
				#}
			}
			add_to_array = { ROOT.local_possible_operations = 17 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 3 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 4 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 17 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}

add_insurgency_embed_operations = {
	for_each_scope_loop = {
		array = active_insurgencies
		if = {
			limit = {
				NOT = {
					is_in_array = {
						ROOT.insurgency_support = THIS
					}
				}
			}
			add_to_array = { ROOT.local_possible_operations = 18 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 1 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 18 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}
add_counter_insurgency_embed_operations = {
	if = {
		limit = {
			NOT = { is_in_array = { PREV.counter_insurgency_embed = ROOT } }
			has_active_resistance = yes
		}
		add_to_array = { ROOT.local_possible_operations = 19 }
		add_to_array = { ROOT.local_possible_operations_risk_level = 3 }
		add_to_array = { ROOT.local_possible_operations_operation_type = 25 }
		add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
		add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
	
		add_to_array = { ROOT.local_possible_operations_id_token = 19 }
		add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
		add_to_array = { ROOT.local_possible_operations_target = PREV.id }
	}
}
add_tech_stealing_operations = {
	for_each_loop = {   
		array = researched_techs
		if = {
			limit = {
				NOT = {
					is_in_array = { ROOT.researched_techs = v }
				}
			}
			add_to_array = { ROOT.local_possible_operations = 20 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 5 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 17 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 1 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 20 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = v }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}		

add_anti_resistance_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				has_active_resistance = yes
			}
			add_to_array = { ROOT.local_possible_operations = 21 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 25 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 21 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}

add_railway_sabotage_operations = {
	for_each_scope_loop = {
		array = controlled_states
		if = {
			limit = {
				has_railway_level = {
					level = 1
					state = THIS
				}
			}
			add_to_array = { ROOT.local_possible_operations = 22 }
			add_to_array = { ROOT.local_possible_operations_risk_level = 4 }
			add_to_array = { ROOT.local_possible_operations_operation_type = 12 }
			add_to_array = { ROOT.local_possible_operations_money_cost = 50 }
			add_to_array = { ROOT.local_possible_operations_repeatable_condition = 2 }
		
			add_to_array = { ROOT.local_possible_operations_id_token = 22 }
			add_to_array = { ROOT.local_possible_operations_personnel_target = THIS }
			add_to_array = { ROOT.local_possible_operations_target = PREV.id }
		}
	}
}


                    #Sabotage Nuclear Programme
						#controlled_states
                    #Sabotage Nuclear Site
                    #Sabotage Airfield
                    #Sabotage Military Industry
                    #Sabotage Dockyard
                    #Sabotage Port
                    #Sabotage Civilian Industry
                    #Blow Up Key Infrastructure
                    #Perform Terrorist Attack
                    #Prepare Local Uprising
                    #Contact Resistance Group 
                    #Train Local Resistance
                    #Arm Local Resistance
                    #Embed into Insurgency
                    #Counter Espionage Embed